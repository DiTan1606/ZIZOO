# ğŸ“ TÃ­nh nÄƒng Chá»n Äá»‹a Äiá»ƒm TÃ¹y Chá»‰nh

## Tá»•ng quan

TÃ­nh nÄƒng má»›i cho phÃ©p ngÆ°á»i dÃ¹ng:
1. **Xem danh sÃ¡ch Ä‘á»‹a Ä‘iá»ƒm** cÃ³ thá»ƒ Ä‘i táº¡i Ä‘iá»ƒm Ä‘áº¿n
2. **Chá»n Ä‘á»‹a Ä‘iá»ƒm** tá»« danh sÃ¡ch hoáº·c thÃªm Ä‘á»‹a Ä‘iá»ƒm tÃ¹y chá»‰nh
3. **Chá»‰ Ä‘á»‹nh khung giá»** muá»‘n Ä‘i cho tá»«ng Ä‘á»‹a Ä‘iá»ƒm
4. **Táº¡o lá»‹ch trÃ¬nh** dá»±a trÃªn cÃ¡c Ä‘á»‹a Ä‘iá»ƒm vÃ  khung giá» Ä‘Ã£ chá»n

## Flow ngÆ°á»i dÃ¹ng

### BÆ°á»›c 1: Nháº­p thÃ´ng tin cÆ¡ báº£n
- Äiá»ƒm khá»Ÿi hÃ nh
- Äiá»ƒm Ä‘áº¿n
- NgÃ y khá»Ÿi hÃ nh
- Sá»‘ ngÃ y, sá»‘ ngÆ°á»i
- NgÃ¢n sÃ¡ch
- Phong cÃ¡ch du lá»‹ch
- Sá»Ÿ thÃ­ch

### BÆ°á»›c 2: Chá»n Ä‘á»‹a Ä‘iá»ƒm (Má»šI)
NgÆ°á»i dÃ¹ng sáº½ tháº¥y:

#### A. Danh sÃ¡ch Ä‘á»‹a Ä‘iá»ƒm gá»£i Ã½
- PhÃ¢n loáº¡i theo danh má»¥c:
  - ğŸ—ºï¸ Táº¥t cáº£
  - ğŸ›ï¸ Tham quan
  - ğŸ½ï¸ NhÃ  hÃ ng
  - â˜• CÃ  phÃª
  - ğŸŒ³ CÃ´ng viÃªn
  - ğŸ¨ Báº£o tÃ ng
  - ğŸ›ï¸ Mua sáº¯m
  - ğŸ‰ Giáº£i trÃ­

- Má»—i Ä‘á»‹a Ä‘iá»ƒm hiá»ƒn thá»‹:
  - TÃªn vÃ  Ä‘á»‹a chá»‰
  - Rating vÃ  sá»‘ Ä‘Ã¡nh giÃ¡
  - Má»©c giÃ¡
  - Tráº¡ng thÃ¡i má»Ÿ cá»­a

#### B. ThÃªm Ä‘á»‹a Ä‘iá»ƒm tÃ¹y chá»‰nh
NgÆ°á»i dÃ¹ng cÃ³ thá»ƒ thÃªm Ä‘á»‹a Ä‘iá»ƒm khÃ´ng cÃ³ trong danh sÃ¡ch:
- TÃªn Ä‘á»‹a Ä‘iá»ƒm (báº¯t buá»™c)
- Äá»‹a chá»‰ (tÃ¹y chá»n)
- Khung giá» mong muá»‘n (tÃ¹y chá»n)
- Thá»i gian tham quan (30 phÃºt - 4 giá»)

#### C. Chá»‰ Ä‘á»‹nh khung giá»
Sau khi chá»n Ä‘á»‹a Ä‘iá»ƒm, ngÆ°á»i dÃ¹ng cÃ³ thá»ƒ:
- Chá»n khung giá» cá»¥ thá»ƒ (VD: 09:00, 14:30)
- Chá»n thá»i gian tham quan (30 phÃºt, 1h, 2h, 3h, 4h)
- Bá» trá»‘ng Ä‘á»ƒ há»‡ thá»‘ng tá»± Ä‘á»™ng sáº¯p xáº¿p

#### D. Panel Ä‘á»‹a Ä‘iá»ƒm Ä‘Ã£ chá»n
Hiá»ƒn thá»‹ danh sÃ¡ch Ä‘á»‹a Ä‘iá»ƒm Ä‘Ã£ chá»n vá»›i:
- Sá»‘ thá»© tá»±
- TÃªn Ä‘á»‹a Ä‘iá»ƒm
- Badge "TÃ¹y chá»‰nh" náº¿u lÃ  Ä‘á»‹a Ä‘iá»ƒm tá»± thÃªm
- Khung giá» vÃ  thá»i gian tham quan
- NÃºt xÃ³a

### BÆ°á»›c 3: XÃ¡c nháº­n thÃ´ng tin
Xem láº¡i:
- ThÃ´ng tin chuyáº¿n Ä‘i
- Danh sÃ¡ch Ä‘á»‹a Ä‘iá»ƒm Ä‘Ã£ chá»n vá»›i khung giá»
- CÃ¡c tÃ­nh nÄƒng lá»‹ch trÃ¬nh sáº½ cÃ³

### BÆ°á»›c 4: Xem lá»‹ch trÃ¬nh hoÃ n chá»‰nh
Lá»‹ch trÃ¬nh Ä‘Æ°á»£c táº¡o dá»±a trÃªn:
- Äá»‹a Ä‘iá»ƒm ngÆ°á»i dÃ¹ng Ä‘Ã£ chá»n
- Khung giá» Ä‘Ã£ chá»‰ Ä‘á»‹nh
- Tá»‘i Æ°u hÃ³a lá»™ trÃ¬nh di chuyá»ƒn

## CÃ¡ch hoáº¡t Ä‘á»™ng

### 1. TÃ¬m kiáº¿m Ä‘á»‹a Ä‘iá»ƒm
```javascript
// Sá»­ dá»¥ng Google Places API
- TÃ¬m theo danh má»¥c (restaurant, cafe, tourist_attraction...)
- Lá»c theo rating >= 4.0
- Giá»›i háº¡n bÃ¡n kÃ­nh 20km tá»« trung tÃ¢m
- Hiá»ƒn thá»‹ tá»‘i Ä‘a 10 Ä‘á»‹a Ä‘iá»ƒm/danh má»¥c
```

### 2. Sáº¯p xáº¿p Ä‘á»‹a Ä‘iá»ƒm theo thá»i gian
```javascript
// Logic trong customItineraryBuilder.js
1. PhÃ¢n loáº¡i Ä‘á»‹a Ä‘iá»ƒm:
   - CÃ³ khung giá» cá»‘ Ä‘á»‹nh
   - KhÃ´ng cÃ³ khung giá» (linh hoáº¡t)

2. Sáº¯p xáº¿p Ä‘á»‹a Ä‘iá»ƒm cÃ³ khung giá» theo thá»i gian

3. PhÃ¢n bá»• vÃ o cÃ¡c ngÃ y:
   - TÃ­nh toÃ¡n thá»i gian kháº£ dá»¥ng má»—i ngÃ y (12 giá»)
   - GÃ¡n Ä‘á»‹a Ä‘iá»ƒm cÃ³ khung giá» trÆ°á»›c
   - Äiá»n Ä‘á»‹a Ä‘iá»ƒm linh hoáº¡t vÃ o khoáº£ng trá»‘ng

4. Tá»‘i Æ°u hÃ³a:
   - Sáº¯p xáº¿p láº¡i theo thá»i gian trong ngÃ y
   - ThÃªm thá»i gian di chuyá»ƒn giá»¯a cÃ¡c Ä‘iá»ƒm
   - ThÃªm bá»¯a Äƒn vÃ  thá»i gian nghá»‰
```

### 3. Táº¡o lá»‹ch trÃ¬nh theo giá»
```javascript
// Má»—i ngÃ y bao gá»“m:
- NgÃ y 1:
  * 06:30 - Khá»Ÿi hÃ nh
  * 12:00 - Ä‚n trÆ°a
  * 12:30 - Check-in khÃ¡ch sáº¡n
  * 14:00 - Báº¯t Ä‘áº§u tham quan Ä‘á»‹a Ä‘iá»ƒm Ä‘Ã£ chá»n
  
- NgÃ y 2-N:
  * 07:00 - Ä‚n sÃ¡ng
  * 08:00 - Tham quan Ä‘á»‹a Ä‘iá»ƒm Ä‘Ã£ chá»n
  * 18:30 - Ä‚n tá»‘i
  * 20:00 - Hoáº¡t Ä‘á»™ng tá»± do
```

### 4. Xá»­ lÃ½ xung Ä‘á»™t thá»i gian
```javascript
// Náº¿u cÃ³ Ä‘á»‹a Ä‘iá»ƒm trÃ¹ng khung giá»:
- Hiá»ƒn thá»‹ cáº£nh bÃ¡o cho ngÆ°á»i dÃ¹ng
- Há»‡ thá»‘ng tá»± Ä‘á»™ng Ä‘iá»u chá»‰nh
- Æ¯u tiÃªn Ä‘á»‹a Ä‘iá»ƒm Ä‘Æ°á»£c chá»n trÆ°á»›c
```

## Components

### 1. DestinationSelector.js
Component chÃ­nh cho viá»‡c chá»n Ä‘á»‹a Ä‘iá»ƒm:
- Hiá»ƒn thá»‹ danh sÃ¡ch Ä‘á»‹a Ä‘iá»ƒm theo danh má»¥c
- Form thÃªm Ä‘á»‹a Ä‘iá»ƒm tÃ¹y chá»‰nh
- Panel quáº£n lÃ½ Ä‘á»‹a Ä‘iá»ƒm Ä‘Ã£ chá»n
- Chá»‰ Ä‘á»‹nh khung giá» vÃ  thá»i gian

### 2. CompleteItineraryPlanner.js
Cáº­p nháº­t Ä‘á»ƒ tÃ­ch há»£p DestinationSelector:
- ThÃªm step 2: Chá»n Ä‘á»‹a Ä‘iá»ƒm
- LÆ°u danh sÃ¡ch Ä‘á»‹a Ä‘iá»ƒm Ä‘Ã£ chá»n
- Truyá»n vÃ o service táº¡o lá»‹ch trÃ¬nh

### 3. customItineraryBuilder.js
Service xá»­ lÃ½ logic:
- `organizeDestinationsByTime()` - Sáº¯p xáº¿p Ä‘á»‹a Ä‘iá»ƒm theo thá»i gian
- `generateScheduleFromDestinations()` - Táº¡o lá»‹ch trÃ¬nh theo giá»
- `calculateCostFromDestinations()` - TÃ­nh chi phÃ­
- `generateDayNotes()` - Táº¡o ghi chÃº Ä‘áº·c biá»‡t

### 4. completeItineraryService.js
Cáº­p nháº­t Ä‘á»ƒ há»— trá»£ Ä‘á»‹a Ä‘iá»ƒm tÃ¹y chá»‰nh:
- Kiá»ƒm tra `customDestinations` trong preferences
- Sá»­ dá»¥ng logic má»›i náº¿u cÃ³ Ä‘á»‹a Ä‘iá»ƒm tÃ¹y chá»‰nh
- Fallback vá» logic cÅ© náº¿u khÃ´ng cÃ³

## VÃ­ dá»¥ sá»­ dá»¥ng

### Scenario 1: Chá»n tá»« danh sÃ¡ch gá»£i Ã½
```
1. NgÆ°á»i dÃ¹ng chá»n "VÅ©ng TÃ u" lÃ m Ä‘iá»ƒm Ä‘áº¿n
2. Há»‡ thá»‘ng hiá»ƒn thá»‹ 50+ Ä‘á»‹a Ä‘iá»ƒm
3. NgÆ°á»i dÃ¹ng chá»n:
   - BÃ£i TrÆ°á»›c (khÃ´ng chá»n giá»)
   - TÆ°á»£ng ChÃºa KitÃ´ (09:00, 2 giá»)
   - NhÃ  hÃ ng Ganh Hao (12:00, 1 giá»)
   - BÃ£i Sau (15:00, 2 giá»)
4. Há»‡ thá»‘ng táº¡o lá»‹ch trÃ¬nh tá»‘i Æ°u
```

### Scenario 2: ThÃªm Ä‘á»‹a Ä‘iá»ƒm tÃ¹y chá»‰nh
```
1. NgÆ°á»i dÃ¹ng click "ThÃªm Ä‘á»‹a Ä‘iá»ƒm tÃ¹y chá»‰nh"
2. Nháº­p:
   - TÃªn: "QuÃ¡n cÃ  phÃª yÃªu thÃ­ch"
   - Äá»‹a chá»‰: "123 ÄÆ°á»ng ABC"
   - Khung giá»: 16:00
   - Thá»i gian: 1 giá»
3. Äá»‹a Ä‘iá»ƒm Ä‘Æ°á»£c thÃªm vÃ o danh sÃ¡ch
4. Há»‡ thá»‘ng tÃ­ch há»£p vÃ o lá»‹ch trÃ¬nh
```

### Scenario 3: KhÃ´ng chá»n khung giá»
```
1. NgÆ°á»i dÃ¹ng chá»n 5 Ä‘á»‹a Ä‘iá»ƒm
2. KhÃ´ng chá»‰ Ä‘á»‹nh khung giá» cho báº¥t ká»³ Ä‘á»‹a Ä‘iá»ƒm nÃ o
3. Há»‡ thá»‘ng tá»± Ä‘á»™ng:
   - PhÃ¢n bá»• Ä‘á»u vÃ o cÃ¡c ngÃ y
   - Sáº¯p xáº¿p theo thá»© tá»± há»£p lÃ½
   - Tá»‘i Æ°u khoáº£ng cÃ¡ch di chuyá»ƒn
```

## Lá»£i Ã­ch

### Cho ngÆ°á»i dÃ¹ng
âœ… Kiá»ƒm soÃ¡t hoÃ n toÃ n lá»‹ch trÃ¬nh
âœ… Linh hoáº¡t chá»n Ä‘á»‹a Ä‘iá»ƒm vÃ  thá»i gian
âœ… ThÃªm Ä‘á»‹a Ä‘iá»ƒm riÃªng khÃ´ng cÃ³ trong há»‡ thá»‘ng
âœ… Xem trÆ°á»›c vÃ  Ä‘iá»u chá»‰nh dá»… dÃ ng

### Cho há»‡ thá»‘ng
âœ… TÄƒng Ä‘á»™ chÃ­nh xÃ¡c cá»§a lá»‹ch trÃ¬nh
âœ… Giáº£m sá»‘ láº§n ngÆ°á»i dÃ¹ng pháº£i chá»‰nh sá»­a sau
âœ… Thu tháº­p dá»¯ liá»‡u vá» sá»Ÿ thÃ­ch ngÆ°á»i dÃ¹ng
âœ… Cáº£i thiá»‡n tráº£i nghiá»‡m ngÆ°á»i dÃ¹ng

## Cáº£i tiáº¿n trong tÆ°Æ¡ng lai

### Phase 2
- [ ] KÃ©o tháº£ Ä‘á»ƒ sáº¯p xáº¿p láº¡i Ä‘á»‹a Ä‘iá»ƒm
- [ ] Hiá»ƒn thá»‹ báº£n Ä‘á»“ vá»›i cÃ¡c Ä‘á»‹a Ä‘iá»ƒm Ä‘Ã£ chá»n
- [ ] TÃ­nh toÃ¡n khoáº£ng cÃ¡ch vÃ  thá»i gian di chuyá»ƒn thá»±c táº¿
- [ ] Gá»£i Ã½ Ä‘á»‹a Ä‘iá»ƒm dá»±a trÃªn AI

### Phase 3
- [ ] Chia sáº» danh sÃ¡ch Ä‘á»‹a Ä‘iá»ƒm vá»›i báº¡n bÃ¨
- [ ] LÆ°u template Ä‘á»‹a Ä‘iá»ƒm yÃªu thÃ­ch
- [ ] Äá»“ng bá»™ vá»›i Google Maps
- [ ] Nháº­p lá»‹ch trÃ¬nh tá»« file Excel/CSV

## Testing

### Test cases
1. âœ… Chá»n Ä‘á»‹a Ä‘iá»ƒm tá»« danh sÃ¡ch
2. âœ… ThÃªm Ä‘á»‹a Ä‘iá»ƒm tÃ¹y chá»‰nh
3. âœ… Chá»‰ Ä‘á»‹nh khung giá»
4. âœ… XÃ³a Ä‘á»‹a Ä‘iá»ƒm Ä‘Ã£ chá»n
5. âœ… Chá»n táº¥t cáº£ / Bá» chá»n táº¥t cáº£
6. âœ… Lá»c theo danh má»¥c
7. âœ… Xá»­ lÃ½ xung Ä‘á»™t thá»i gian
8. âœ… Táº¡o lá»‹ch trÃ¬nh vá»›i Ä‘á»‹a Ä‘iá»ƒm Ä‘Ã£ chá»n

### Edge cases
- KhÃ´ng chá»n Ä‘á»‹a Ä‘iá»ƒm nÃ o â†’ Hiá»ƒn thá»‹ cáº£nh bÃ¡o
- Chá»n quÃ¡ nhiá»u Ä‘á»‹a Ä‘iá»ƒm cho sá»‘ ngÃ y â†’ Cáº£nh bÃ¡o lá»‹ch trÃ¬nh dÃ y
- Äá»‹a Ä‘iá»ƒm trÃ¹ng khung giá» â†’ Tá»± Ä‘á»™ng Ä‘iá»u chá»‰nh
- Äá»‹a Ä‘iá»ƒm tÃ¹y chá»‰nh khÃ´ng cÃ³ tá»a Ä‘á»™ â†’ Sá»­ dá»¥ng tá»a Ä‘á»™ trung tÃ¢m

## Káº¿t luáº­n

TÃ­nh nÄƒng nÃ y mang láº¡i sá»± linh hoáº¡t vÃ  kiá»ƒm soÃ¡t cao cho ngÆ°á»i dÃ¹ng trong viá»‡c táº¡o lá»‹ch trÃ¬nh du lá»‹ch, Ä‘á»“ng thá»i váº«n giá»¯ Ä‘Æ°á»£c sá»± tiá»‡n lá»£i cá»§a viá»‡c tá»± Ä‘á»™ng hÃ³a.
